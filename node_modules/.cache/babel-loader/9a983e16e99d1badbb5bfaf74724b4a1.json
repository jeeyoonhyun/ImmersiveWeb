{"ast":null,"code":"/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n(function (window, factory) {\n  'use strict'; // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define(['ev-emitter/ev-emitter'], function (EvEmitter) {\n      return factory(window, EvEmitter);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('ev-emitter'));\n  } else {\n    // browser global\n    window.imagesLoaded = factory(window, window.EvEmitter);\n  }\n})(typeof window !== 'undefined' ? window : this, // --------------------------  factory -------------------------- //\nfunction factory(window, EvEmitter) {\n  'use strict';\n\n  var $ = window.jQuery;\n  var console = window.console; // -------------------------- helpers -------------------------- //\n  // extend objects\n\n  function extend(a, b) {\n    for (var prop in b) {\n      a[prop] = b[prop];\n    }\n\n    return a;\n  }\n\n  var arraySlice = Array.prototype.slice; // turn element or nodeList into an array\n\n  function makeArray(obj) {\n    if (Array.isArray(obj)) {\n      // use object if already an array\n      return obj;\n    }\n\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n\n    if (isArrayLike) {\n      // convert nodeList to array\n      return arraySlice.call(obj);\n    } // array of single index\n\n\n    return [obj];\n  } // -------------------------- imagesLoaded -------------------------- //\n\n  /**\n   * @param {Array, Element, NodeList, String} elem\n   * @param {Object or Function} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   */\n\n\n  function ImagesLoaded(elem, options, onAlways) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if (!(this instanceof ImagesLoaded)) {\n      return new ImagesLoaded(elem, options, onAlways);\n    } // use elem as selector string\n\n\n    var queryElem = elem;\n\n    if (typeof elem == 'string') {\n      queryElem = document.querySelectorAll(elem);\n    } // bail if bad element\n\n\n    if (!queryElem) {\n      console.error('Bad element for imagesLoaded ' + (queryElem || elem));\n      return;\n    }\n\n    this.elements = makeArray(queryElem);\n    this.options = extend({}, this.options); // shift arguments if no options set\n\n    if (typeof options == 'function') {\n      onAlways = options;\n    } else {\n      extend(this.options, options);\n    }\n\n    if (onAlways) {\n      this.on('always', onAlways);\n    }\n\n    this.getImages();\n\n    if ($) {\n      // add jQuery Deferred object\n      this.jqDeferred = new $.Deferred();\n    } // HACK check async to allow time to bind listeners\n\n\n    setTimeout(this.check.bind(this));\n  }\n\n  ImagesLoaded.prototype = Object.create(EvEmitter.prototype);\n  ImagesLoaded.prototype.options = {};\n\n  ImagesLoaded.prototype.getImages = function () {\n    this.images = []; // filter & find items if we have an item selector\n\n    this.elements.forEach(this.addElementImages, this);\n  };\n  /**\n   * @param {Node} element\n   */\n\n\n  ImagesLoaded.prototype.addElementImages = function (elem) {\n    // filter siblings\n    if (elem.nodeName == 'IMG') {\n      this.addImage(elem);\n    } // get background image on element\n\n\n    if (this.options.background === true) {\n      this.addElementBackgroundImages(elem);\n    } // find children\n    // no non-element nodes, #143\n\n\n    var nodeType = elem.nodeType;\n\n    if (!nodeType || !elementNodeTypes[nodeType]) {\n      return;\n    }\n\n    var childImgs = elem.querySelectorAll('img'); // concat childElems to filterFound array\n\n    for (var i = 0; i < childImgs.length; i++) {\n      var img = childImgs[i];\n      this.addImage(img);\n    } // get child background images\n\n\n    if (typeof this.options.background == 'string') {\n      var children = elem.querySelectorAll(this.options.background);\n\n      for (i = 0; i < children.length; i++) {\n        var child = children[i];\n        this.addElementBackgroundImages(child);\n      }\n    }\n  };\n\n  var elementNodeTypes = {\n    1: true,\n    9: true,\n    11: true\n  };\n\n  ImagesLoaded.prototype.addElementBackgroundImages = function (elem) {\n    var style = getComputedStyle(elem);\n\n    if (!style) {\n      // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n      return;\n    } // get url inside url(\"...\")\n\n\n    var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n    var matches = reURL.exec(style.backgroundImage);\n\n    while (matches !== null) {\n      var url = matches && matches[2];\n\n      if (url) {\n        this.addBackground(url, elem);\n      }\n\n      matches = reURL.exec(style.backgroundImage);\n    }\n  };\n  /**\n   * @param {Image} img\n   */\n\n\n  ImagesLoaded.prototype.addImage = function (img) {\n    var loadingImage = new LoadingImage(img);\n    this.images.push(loadingImage);\n  };\n\n  ImagesLoaded.prototype.addBackground = function (url, elem) {\n    var background = new Background(url, elem);\n    this.images.push(background);\n  };\n\n  ImagesLoaded.prototype.check = function () {\n    var _this = this;\n\n    this.progressedCount = 0;\n    this.hasAnyBroken = false; // complete if no images\n\n    if (!this.images.length) {\n      this.complete();\n      return;\n    }\n\n    function onProgress(image, elem, message) {\n      // HACK - Chrome triggers event before object properties have changed. #83\n      setTimeout(function () {\n        _this.progress(image, elem, message);\n      });\n    }\n\n    this.images.forEach(function (loadingImage) {\n      loadingImage.once('progress', onProgress);\n      loadingImage.check();\n    });\n  };\n\n  ImagesLoaded.prototype.progress = function (image, elem, message) {\n    this.progressedCount++;\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded; // progress event\n\n    this.emitEvent('progress', [this, image, elem]);\n\n    if (this.jqDeferred && this.jqDeferred.notify) {\n      this.jqDeferred.notify(this, image);\n    } // check if completed\n\n\n    if (this.progressedCount == this.images.length) {\n      this.complete();\n    }\n\n    if (this.options.debug && console) {\n      console.log('progress: ' + message, image, elem);\n    }\n  };\n\n  ImagesLoaded.prototype.complete = function () {\n    var eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    this.emitEvent(eventName, [this]);\n    this.emitEvent('always', [this]);\n\n    if (this.jqDeferred) {\n      var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n      this.jqDeferred[jqMethod](this);\n    }\n  }; // --------------------------  -------------------------- //\n\n\n  function LoadingImage(img) {\n    this.img = img;\n  }\n\n  LoadingImage.prototype = Object.create(EvEmitter.prototype);\n\n  LoadingImage.prototype.check = function () {\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      // report based on naturalWidth\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      return;\n    } // If none of the checks above matched, simulate loading on detached element.\n\n\n    this.proxyImage = new Image();\n    this.proxyImage.addEventListener('load', this);\n    this.proxyImage.addEventListener('error', this); // bind to image as well for Firefox. #191\n\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.proxyImage.src = this.img.src;\n  };\n\n  LoadingImage.prototype.getIsImageComplete = function () {\n    // check for non-zero, non-undefined naturalWidth\n    // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n    return this.img.complete && this.img.naturalWidth;\n  };\n\n  LoadingImage.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.img, message]);\n  }; // ----- events ----- //\n  // trigger specified handler for event type\n\n\n  LoadingImage.prototype.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  LoadingImage.prototype.onload = function () {\n    this.confirm(true, 'onload');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.onerror = function () {\n    this.confirm(false, 'onerror');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener('load', this);\n    this.proxyImage.removeEventListener('error', this);\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  }; // -------------------------- Background -------------------------- //\n\n\n  function Background(url, element) {\n    this.url = url;\n    this.element = element;\n    this.img = new Image();\n  } // inherit LoadingImage prototype\n\n\n  Background.prototype = Object.create(LoadingImage.prototype);\n\n  Background.prototype.check = function () {\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.img.src = this.url; // check if image is already complete\n\n    var isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      this.unbindEvents();\n    }\n  };\n\n  Background.prototype.unbindEvents = function () {\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  };\n\n  Background.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.element, message]);\n  }; // -------------------------- jQuery -------------------------- //\n\n\n  ImagesLoaded.makeJQueryPlugin = function (jQuery) {\n    jQuery = jQuery || window.jQuery;\n\n    if (!jQuery) {\n      return;\n    } // set local variable\n\n\n    $ = jQuery; // $().imagesLoaded()\n\n    $.fn.imagesLoaded = function (options, callback) {\n      var instance = new ImagesLoaded(this, options, callback);\n      return instance.jqDeferred.promise($(this));\n    };\n  }; // try making plugin\n\n\n  ImagesLoaded.makeJQueryPlugin(); // --------------------------  -------------------------- //\n\n  return ImagesLoaded;\n});","map":{"version":3,"sources":["/Users/jeeyoonhyun/immersive-web/node_modules/imagesloaded/imagesloaded.js"],"names":["window","factory","define","amd","EvEmitter","module","exports","require","imagesLoaded","$","jQuery","console","extend","a","b","prop","arraySlice","Array","prototype","slice","makeArray","obj","isArray","isArrayLike","length","call","ImagesLoaded","elem","options","onAlways","queryElem","document","querySelectorAll","error","elements","on","getImages","jqDeferred","Deferred","setTimeout","check","bind","Object","create","images","forEach","addElementImages","nodeName","addImage","background","addElementBackgroundImages","nodeType","elementNodeTypes","childImgs","i","img","children","child","style","getComputedStyle","reURL","matches","exec","backgroundImage","url","addBackground","loadingImage","LoadingImage","push","Background","_this","progressedCount","hasAnyBroken","complete","onProgress","image","message","progress","once","isLoaded","emitEvent","notify","debug","log","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","Image","addEventListener","src","handleEvent","event","method","type","onload","unbindEvents","onerror","removeEventListener","element","makeJQueryPlugin","fn","callback","instance","promise"],"mappings":"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","sourcesContent":["/*!\n * imagesLoaded v4.1.4\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( typeof window !== 'undefined' ? window : this,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n'use strict';\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\nvar arraySlice = Array.prototype.slice;\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    return obj;\n  }\n\n  var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  if ( isArrayLike ) {\n    // convert nodeList to array\n    return arraySlice.call( obj );\n  }\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  var queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error( 'Bad element for imagesLoaded ' + ( queryElem || elem ) );\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = extend( {}, this.options );\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n"]},"metadata":{},"sourceType":"script"}